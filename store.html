<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Computer Hardware Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:Segoe UI;
    background:#0b0f1a;
    color:white;
    transition:0.3s;
}

body.light{
    background:#f4f4f4;
    color:black;
}

.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px;
}

.controls{
    display:flex;
    gap:10px;
    align-items:center;
}

button{
    padding:8px 12px;
    border:none;
    border-radius:8px;
    background:#ff5f9e;
    color:white;
    cursor:pointer;
}

.logout-btn{
    background:red;
}

.toggle-btn{
    background:orange;
}

.container{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
    gap:20px;
    padding:20px;
}

.card{
    background:#12182b;
    padding:20px;
    border-radius:15px;
    text-align:center;
    box-shadow:0 0 15px #ff5f9e;
    transition:0.3s;
}

body.light .card{
    background:white;
    box-shadow:0 0 10px #aaa;
}

.price{
    color:#ff5f9e;
    font-weight:bold;
    margin:10px 0;
}

.cart, .history{
    background:#12182b;
    padding:20px;
    margin:20px;
    border-radius:15px;
    box-shadow:0 0 15px #ff5f9e;
    transition:0.3s;
}

body.light .cart, 
body.light .history{
    background:white;
    box-shadow:0 0 10px #aaa;
}

.cart-item{
    display:flex;
    justify-content:space-between;
    margin-bottom:10px;
}

.total{
    font-size:18px;
    font-weight:bold;
}

.checkout-btn{
    background:limegreen;
    margin-top:10px;
}

input{
    padding:8px;
    margin:5px 0;
    border:none;
    border-radius:6px;
    width:100%;
}
</style>
</head>

<body>

<script>
if(!localStorage.getItem("loggedInUser")){
    window.location.href="login.html";
}
</script>

<div class="header">
    <h1>Computer Hardware Store üñ•Ô∏è</h1>
    <div class="controls">
        <span id="username"></span>
        <button class="toggle-btn" onclick="toggleMode()">üåô/‚òÄ</button>
        <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
</div>

<div class="container" id="store"></div>

<div class="cart">
    <h2>Your Cart üõí</h2>
    <div id="cartItems"></div>
    <div class="total">Total: ‚Çπ<span id="total">0</span></div>
    <button class="checkout-btn" onclick="showPayment()">Checkout</button>

    <div id="paymentSection" style="display:none;">
        <h3>Payment Details üí≥</h3>
        <input type="text" placeholder="Card Number">
        <input type="text" placeholder="Expiry Date">
        <input type="text" placeholder="CVV">
        <button onclick="completePurchase()">Pay Now</button>
    </div>
</div>

<div class="history">
    <h2>Order History üì¶</h2>
    <div id="orderHistory"></div>
</div>

<script>

// Show username
const user = localStorage.getItem("loggedInUser");
document.getElementById("username").innerText = "Welcome, " + user;

// Dark/Light Mode
function toggleMode(){
    document.body.classList.toggle("light");
}

// Logout
function logout(){
    if(confirm("Are you sure you want to logout?")){
        localStorage.removeItem("loggedInUser");
        window.location.href="login.html";
    }
}

const products = [
    { name:"Mouse", price:800 },
    { name:"Keyboard", price:1200 },
    { name:"Printer", price:15000 },
    { name:"Monitor", price:13000 },
    { name:"CPU", price:19000 },
    { name:"Speakers", price:500 },
    { name:"Webcam", price:1500 },
    { name:"Headphones", price:3000 },
    { name:"External Hard Disk", price:6000 },
    { name:"UPS", price:8600 }
];

let cart = {};
let total = 0;
let orders = JSON.parse(localStorage.getItem("orders")) || [];

const store = document.getElementById("store");
const cartItems = document.getElementById("cartItems");
const totalDisplay = document.getElementById("total");
const historyDiv = document.getElementById("orderHistory");

// Display products
products.forEach((product,index)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
        <h3>${product.name}</h3>
        <div class="price">‚Çπ${product.price}</div>
        <button onclick="addToCart(${index})">Add to Cart</button>
    `;
    store.appendChild(card);
});

function addToCart(index){
    if(cart[index]){
        cart[index].qty++;
    } else {
        cart[index] = { ...products[index], qty:1 };
    }
    updateCart();
}

function updateCart(){
    cartItems.innerHTML = "";
    total = 0;

    Object.keys(cart).forEach(key=>{
        const item = cart[key];
        total += item.price * item.qty;

        const div = document.createElement("div");
        div.className="cart-item";
        div.innerHTML = `
            <span>${item.name} (‚Çπ${item.price})</span>
            <div>
                <button onclick="changeQty(${key}, -1)">-</button>
                ${item.qty}
                <button onclick="changeQty(${key}, 1)">+</button>
                <button onclick="removeItem(${key})">X</button>
            </div>
        `;
        cartItems.appendChild(div);
    });

    totalDisplay.textContent = total;
}

function changeQty(index, amount){
    cart[index].qty += amount;
    if(cart[index].qty <= 0) delete cart[index];
    updateCart();
}

function removeItem(index){
    delete cart[index];
    updateCart();
}

function showPayment(){
    if(total === 0){
        alert("Cart is empty!");
        return;
    }
    document.getElementById("paymentSection").style.display="block";
}

function completePurchase(){
    alert("Payment Successful üéâ Total Paid: ‚Çπ" + total);

    orders.push({
        date: new Date().toLocaleString(),
        amount: total
    });

    localStorage.setItem("orders", JSON.stringify(orders));

    cart = {};
    total = 0;
    updateCart();
    document.getElementById("paymentSection").style.display="none";

    displayOrders();
}

function displayOrders(){
    historyDiv.innerHTML = "";
    orders.forEach(order=>{
        const p = document.createElement("p");
        p.innerText = order.date + " - ‚Çπ" + order.amount;
        historyDiv.appendChild(p);
    });
}

displayOrders();

</script>

</body>
</html>
